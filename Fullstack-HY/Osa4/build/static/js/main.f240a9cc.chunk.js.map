{"version":3,"sources":["services/login.js","services/blogs.js","components/RemoveButton.js","components/Blog.js","components/blogForm.js","components/Togglable.js","App.js","index.js"],"names":["postLogin","user","axios","post","then","req","data","propTypes","baseUrl","PropTypes","string","isRequired","services_login","token","services_blogs","newToken","concat","get","response","newObject","config","headers","Authorization","console","log","r","id","put","delete","RemBut","_ref","deleteBlog","blog","JSON","parse","window","localStorage","getItem","username","react_default","a","createElement","onClick","Blog","_useState","useState","_useState2","Object","slicedToArray","showBlog","setBlogShow","blogStyle","paddingTop","paddingLeft","border","borderWidth","marginBottom","style","title","author","likes","newBlog","url","RemoveButton","confirm","remove","BlogForm","addBlog","newTitle","newAuthor","newUrl","setTitle","setAuthor","setUrl","onSubmit","type","value","onChange","_ref2","target","_ref3","_ref4","Togglable","React","forwardRef","props","ref","visible","setVisible","hideWhenVisible","display","showWhenVisible","toggleVisibility","useImperativeHandle","buttonLabel","children","App","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","blogs","setBlogs","_useState7","_useState8","setUser","_useState9","_useState10","_useState11","_useState12","_useState13","_useState14","_useState15","_useState16","message","setMessage","_useState17","_useState18","errM","setErrM","blogFormRef","createRef","useEffect","fBlogs","getAll","b","map","B","tempBlog","sort","loggedUserJSON","setToken","className","event","preventDefault","login","l","setItem","stringify","catch","name","removeItem","components_Togglable","blogForm","blogToAdd","current","create","components_Blog","key","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.f240a9cc.chunk.js","sourcesContent":["import axios from 'axios'\r\nimport PropTypes from 'prop-types'\r\nconst baseUrl = 'http://localhost:3003/login'\r\n\r\n\r\nconst postLogin = (user) => {\r\n  const request = axios.post(baseUrl, user)\r\n  return request.then(req => req.data)\r\n}\r\npostLogin.propTypes = {\r\n  baseUrl: PropTypes.string.isRequired\r\n}\r\nexport default { postLogin }","import axios from 'axios'\r\nconst baseUrl = 'http://localhost:3003/blogs'\r\n\r\nlet token = null\r\n\r\nconst setToken = newToken => {\r\n  token = `bearer ${newToken}`\r\n}\r\n\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = (newObject) => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n  }\r\n\r\n  console.log(newObject)\r\n  const response = axios.post(baseUrl, newObject, config)\r\n\r\n  return response.then(r => r.data)\r\n}\r\n\r\nconst put = (newObject, id) => {\r\n  console.log(newObject)\r\n  const request = axios.put(baseUrl+'/'+id, newObject)\r\n  return request.then(r => r.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n  }\r\n  console.log(id)\r\n  const request = axios.delete(baseUrl+'/'+id, config)\r\n  return request.then(r => r.data)\r\n}\r\n\r\nexport default { setToken , getAll, create, put, remove }","import React from 'react'\r\n\r\nconst RemBut = ({ deleteBlog, blog }) => {\r\n  const user =JSON.parse(window.localStorage.getItem('loggedUser'))\r\n\r\n\r\n  if(user.username === blog.user.username){\r\n    return(\r\n      <button onClick = {deleteBlog} >remove</button>\r\n    )}\r\n  else{\r\n    return(null)\r\n  }\r\n}\r\n\r\nexport default RemBut\r\n\r\n\r\n","import React, { useState } from 'react'\r\nimport put from '../services/blogs'\r\nimport remove from '../services/blogs'\r\nimport RemBut from './RemoveButton'\r\n\r\nconst Blog = ({ blog }) => {\r\n  const [showBlog, setBlogShow] = useState(false)\r\n\r\n  const blogStyle = {\r\n    paddingTop: 10,\r\n    paddingLeft: 2,\r\n    border: 'solid',\r\n    borderWidth: 1,\r\n    marginBottom: 5\r\n  }\r\n\r\n\r\n\r\n  const likeBlog = () => {\r\n    console.log(blog.user)\r\n    const newBlog = {\r\n      title: blog.title,\r\n      author: blog.author,\r\n      url: blog.author,\r\n      likes: blog.likes,\r\n      user: blog.user\r\n    }\r\n    const id=blog.id\r\n    put.put(newBlog,id)\r\n  }\r\n\r\n  const deleteBlog = () => {\r\n\r\n    window.confirm('remove blog' + blog.title + 'by' + blog.author)\r\n    console.log(blog.id)\r\n    remove.remove(blog.id)\r\n  }\r\n\r\n\r\n\r\n  if(showBlog === false){\r\n    return(\r\n      <div style={blogStyle} onClick={() => setBlogShow(showBlog===false ? true : false)}>\r\n        {blog.title} {blog.author}\r\n      </div>\r\n    )\r\n  }\r\n  else{\r\n    return(\r\n      <div style={blogStyle} onClick={() => setBlogShow(showBlog===false ? true : false)}>\r\n        <div>\r\n      Title: {blog.title}\r\n        </div>\r\n        <div>\r\n     Author: {blog.author}\r\n        </div>\r\n        <div>\r\n      Likes: {blog.likes} <button onClick = {likeBlog}>like</button>\r\n        </div>\r\n        <div>\r\n      Url: {blog.url}\r\n        </div>\r\n        <RemBut deleteBlog={deleteBlog} blog={blog}/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Blog","import React from 'react'\r\n\r\n\r\nconst BlogForm = ({ addBlog, newTitle, newAuthor, newUrl, setTitle, setAuthor, setUrl }) => {\r\n\r\n  return(\r\n    <div>      <h2>create new</h2>\r\n      <form onSubmit={addBlog}>\r\n        <div>\r\n        title:\r\n          <input\r\n            type=\"text\"\r\n            value = {newTitle}\r\n            onChange={({ target }) => setTitle(target.value)}/>\r\n        </div>\r\n        <div>\r\n        author:\r\n          <input\r\n            type=\"text\"\r\n            value = {newAuthor}\r\n            onChange={({ target }) => setAuthor(target.value)}/>\r\n\r\n        </div>\r\n        <div>\r\n      url:\r\n          <input type=\"text\" value = {newUrl} onChange={({ target }) => setUrl(target.value)}/>\r\n        </div>\r\n        <button type=\"submit\">create</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\nexport default BlogForm\r\n","import React, { useState, useImperativeHandle } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Togglable = React.forwardRef((props, ref) => {\r\n  const [visible, setVisible] = useState(false)\r\n\r\n  const hideWhenVisible = { display: visible ? 'none' : '' }\r\n  const showWhenVisible = { display: visible ? '' : 'none' }\r\n\r\n  const toggleVisibility = () => {\r\n    setVisible(!visible)\r\n  }\r\n\r\n  useImperativeHandle(ref, () => {\r\n    return {\r\n      toggleVisibility\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      <div style={hideWhenVisible}>\r\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\r\n      </div>\r\n      <div style={showWhenVisible}>\r\n        {props.children}\r\n        <button onClick={toggleVisibility}>cancel</button>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nTogglable.propTypes = {\r\n  buttonLabel: PropTypes.string.isRequired\r\n}\r\n\r\nexport default Togglable","import React from 'react'\r\nimport { useState } from 'react'\r\nimport { useEffect } from 'react'\r\nimport postLogin from './services/login'\r\nimport getAll from './services/blogs'\r\nimport setToken from './services/blogs'\r\nimport Blog from './components/Blog'\r\nimport create from './services/blogs'\r\nimport './index.css'\r\nimport BlogForm from './components/blogForm'\r\nimport Togglable from './components/Togglable'\r\n//import logo from './logo.svg';\r\n//import './App.css';\r\n\r\n//<img src={logo} className=\"App-logo\" alt=\"logo\" />\r\n\r\n\r\n\r\n\r\n\r\nconst App = () => {\r\n  const [username , setUsername] = useState('')\r\n  const [password , setPassword] = useState('')\r\n  const [blogs, setBlogs] = useState([])\r\n  //const [newBlog, setNewBlog] = useState('')\r\n  const [user, setUser] = useState(null)\r\n  const [newUrl, setUrl] = useState('')\r\n  const [newTitle, setTitle] = useState('')\r\n  const [newAuthor, setAuthor] = useState('')\r\n  const [message, setMessage] = useState(null)\r\n  const [errM, setErrM] = useState(null)\r\n\r\n  const blogFormRef = React.createRef()\r\n  const Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n    return (\r\n      <div className=\"success\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const Err = ({ message }) => {\r\n    if(message === null){\r\n      return null\r\n    }\r\n    return(\r\n      <div className=\"err\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n  useEffect(() => {\r\n\r\n\r\n    let fBlogs = []\r\n    getAll.getAll().then(b => b.map(B => {\r\n\r\n      console.log(B)\r\n      const tempBlog = (B)\r\n      fBlogs = fBlogs.concat(tempBlog)\r\n\r\n\r\n      console.log(fBlogs)\r\n      console.log(blogs)\r\n      setBlogs(fBlogs.sort((a,b) => a.likes-b.likes))\r\n    }))\r\n\r\n\r\n\r\n  }, [])\r\n\r\n\r\n  useEffect(() => {\r\n    const loggedUserJSON = window.localStorage.getItem('loggedUser')\r\n    console.log(loggedUserJSON + '22222')\r\n\r\n    if (loggedUserJSON!==null) {\r\n      const user = JSON.parse(loggedUserJSON)\r\n      setUser(user)\r\n      setToken.setToken(user.token)\r\n      console.log(user.token)\r\n\r\n    }\r\n  }, [])\r\n\r\n\r\n  const addBlog = (event) => {\r\n    event.preventDefault()\r\n    const blogToAdd = {\r\n      title: newTitle,\r\n      author: newAuthor,\r\n      url: newUrl,\r\n    }\r\n    blogFormRef.current.toggleVisibility()\r\n    create.create(blogToAdd).then(  \r\n      setMessage('A new blog ' + blogToAdd.title + ' by ' + blogToAdd.author + ' added')\r\n      \r\n    )\r\n\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  const handleLogout = () => {\r\n    window.localStorage.removeItem('loggedUser')\r\n\r\n  }\r\n\r\n  const handleLogin = (event) => {\r\n    event.preventDefault()\r\n\r\n    const userToLog = {\r\n      'username' : username,\r\n      'password' : password\r\n    }\r\n\r\n\r\n    const login = postLogin.postLogin(userToLog)\r\n\r\n    console.log('logging in with', username, password)\r\n    console.log(username)\r\n    console.log(password)\r\n\r\n    login.then(\r\n      l => {\r\n        setUser(l)\r\n        window.localStorage.setItem('loggedUser', JSON.stringify(l))\r\n        setToken.setToken(l.token)\r\n      }).catch(setErrM('Wrong username or password'))\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  if (user === null) {\r\n\r\n    return (\r\n\r\n      <div>\r\n        <h2>Login</h2>\r\n        <Err message={errM} />\r\n        <form onSubmit={handleLogin}>\r\n          <div>\r\n\r\n            username\r\n            <input type=\"text\" value={username} name=\"Username\" onChange={({ target }) => setUsername(target.value)}/>\r\n          </div>\r\n          <div>\r\n            password\r\n            <input type=\"password\" value={password} name=\"Password\" onChange={({ target }) => setPassword(target.value)}/>\r\n          </div>\r\n          <button type=\"submit\">login</button>\r\n        </form>\r\n      </div>\r\n\r\n    )\r\n  }\r\n\r\n  else{\r\n    return(\r\n      <div>\r\n\r\n        <h2>blogs</h2>\r\n        <form onSubmit={handleLogout}>\r\n          <h3>\r\n            {user.username + ' logged in'}\r\n            <button type='submit'>  logout</button>\r\n          </h3>\r\n\r\n        </form>\r\n        <Notification message={message} />\r\n        <Togglable buttonLabel = 'New blog' ref={blogFormRef}>\r\n          <BlogForm addBlog={addBlog} newTitle={newTitle} newAuthor={newAuthor}\r\n            newUrl= {newUrl} setTitle={setTitle} setAuthor={setAuthor} setUrl={setUrl} />\r\n        </Togglable>\r\n\r\n        {blogs.map(blog =>\r\n          <Blog key={blog.id} blog={blog} />\r\n        )}\r\n\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n\r\n}\r\nexport default App\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}