(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(13),o=n.n(r),u=n(1),c=n(3),i=n.n(c),s=n(14),m=function(e){return i.a.post("http://localhost:3003/login",e).then(function(e){return e.data})};m.propTypes={baseUrl:n.n(s).a.string.isRequired};var g=m,d="http://localhost:3003/blogs",b=null,f=function(e){b="bearer ".concat(e)},v=function(){return i.a.get(d).then(function(e){return e.data})},E=function(e){var t={headers:{Authorization:b}};return console.log(e),i.a.post(d,e,t).then(function(e){return e.data})},h=function(e,t){return console.log(e),i.a.put(d+"/"+t,e).then(function(e){return e.data})},p=function(e){var t={headers:{Authorization:b}};return console.log(e),i.a.delete(d+"/"+e,t).then(function(e){return e.data})},w=function(e){var t=e.deleteBlog,n=e.blog;return JSON.parse(window.localStorage.getItem("loggedUser")).username===n.user.username?l.a.createElement("button",{onClick:t},"remove"):null},O=function(e){var t=e.blog,n=Object(a.useState)(!1),r=Object(u.a)(n,2),o=r[0],c=r[1],i={paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5};return!1===o?l.a.createElement("div",{style:i,onClick:function(){return c(!1===o)}},t.title," ",t.author):l.a.createElement("div",{style:i,onClick:function(){return c(!1===o)}},l.a.createElement("div",null,"Title: ",t.title),l.a.createElement("div",null,"Author: ",t.author),l.a.createElement("div",null,"Likes: ",t.likes," ",l.a.createElement("button",{onClick:function(){console.log(t.user);var e={title:t.title,author:t.author,url:t.author,likes:t.likes,user:t.user},n=t.id;h(e,n)}},"like")),l.a.createElement("div",null,"Url: ",t.url),l.a.createElement(w,{deleteBlog:function(){window.confirm("remove blog"+t.title+"by"+t.author),console.log(t.id),p(t.id)},blog:t}))},j=(n(40),function(e){var t=e.addBlog,n=e.newTitle,a=e.newAuthor,r=e.newUrl,o=e.setTitle,u=e.setAuthor,c=e.setUrl;return l.a.createElement("div",null,"      ",l.a.createElement("h2",null,"create new"),l.a.createElement("form",{onSubmit:t},l.a.createElement("div",null,"title:",l.a.createElement("input",{type:"text",value:n,onChange:function(e){var t=e.target;return o(t.value)}})),l.a.createElement("div",null,"author:",l.a.createElement("input",{type:"text",value:a,onChange:function(e){var t=e.target;return u(t.value)}})),l.a.createElement("div",null,"url:",l.a.createElement("input",{type:"text",value:r,onChange:function(e){var t=e.target;return c(t.value)}})),l.a.createElement("button",{type:"submit"},"create")))}),y=l.a.forwardRef(function(e,t){var n=Object(a.useState)(!1),r=Object(u.a)(n,2),o=r[0],c=r[1],i={display:o?"none":""},s={display:o?"":"none"},m=function(){c(!o)};return Object(a.useImperativeHandle)(t,function(){return{toggleVisibility:m}}),l.a.createElement("div",null,l.a.createElement("div",{style:i},l.a.createElement("button",{onClick:m},e.buttonLabel)),l.a.createElement("div",{style:s},e.children,l.a.createElement("button",{onClick:m},"cancel")))}),S=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(""),c=Object(u.a)(o,2),i=c[0],s=c[1],m=Object(a.useState)([]),d=Object(u.a)(m,2),b=d[0],h=d[1],p=Object(a.useState)(null),w=Object(u.a)(p,2),S=w[0],k=w[1],C=Object(a.useState)(""),U=Object(u.a)(C,2),A=U[0],T=U[1],B=Object(a.useState)(""),I=Object(u.a)(B,2),N=I[0],x=I[1],J=Object(a.useState)(""),L=Object(u.a)(J,2),R=L[0],z=L[1],D=Object(a.useState)(null),V=Object(u.a)(D,2),W=V[0],q=V[1],H=Object(a.useState)(null),P=Object(u.a)(H,2),F=P[0],G=P[1],K=l.a.createRef();Object(a.useEffect)(function(){var e=[];v().then(function(t){return t.map(function(t){console.log(t);var n=t;e=e.concat(n),console.log(e),console.log(b),h(e.sort(function(e,t){return e.likes-t.likes}))})})},[]),Object(a.useEffect)(function(){var e=window.localStorage.getItem("loggedUser");if(console.log(e+"22222"),null!==e){var t=JSON.parse(e);k(t),f(t.token),console.log(t.token)}},[]);return null===S?l.a.createElement("div",null,l.a.createElement("h2",null,"Login"),l.a.createElement(function(e){var t=e.message;return null===t?null:l.a.createElement("div",{className:"err"},t)},{message:F}),l.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=g({username:n,password:i});console.log("logging in with",n,i),console.log(n),console.log(i),t.then(function(e){k(e),window.localStorage.setItem("loggedUser",JSON.stringify(e)),f(e.token)}).catch(G("Wrong username or password"))}},l.a.createElement("div",null,"username",l.a.createElement("input",{type:"text",value:n,name:"Username",onChange:function(e){var t=e.target;return r(t.value)}})),l.a.createElement("div",null,"password",l.a.createElement("input",{type:"password",value:i,name:"Password",onChange:function(e){var t=e.target;return s(t.value)}})),l.a.createElement("button",{type:"submit"},"login"))):l.a.createElement("div",null,l.a.createElement("h2",null,"blogs"),l.a.createElement("form",{onSubmit:function(){window.localStorage.removeItem("loggedUser")}},l.a.createElement("h3",null,S.username+" logged in",l.a.createElement("button",{type:"submit"},"  logout"))),l.a.createElement(function(e){var t=e.message;return null===t?null:l.a.createElement("div",{className:"success"},t)},{message:W}),l.a.createElement(y,{buttonLabel:"New blog",ref:K},l.a.createElement(j,{addBlog:function(e){e.preventDefault();var t={title:N,author:R,url:A};K.current.toggleVisibility(),E(t).then(q("A new blog "+t.title+" by "+t.author+" added"))},newTitle:N,newAuthor:R,newUrl:A,setTitle:x,setAuthor:z,setUrl:T})),b.map(function(e){return l.a.createElement(O,{key:e.id,blog:e})}))};o.a.render(l.a.createElement(S,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.f240a9cc.chunk.js.map